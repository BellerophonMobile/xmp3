<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XMP3: Main Page</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">XMP3
   
   </div>
   <div id="projectbrief">XMPP Proxy - Small Extensible XMPP Server</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">XMP3 Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>XMP3 provides a lightweight (mostly) RFC compliant XMPP server. The key feature is the ability to hook into the server to receive/send XMPP stanzas. This makes it easy to use XMP3 as a proxy to another system. For example, <a class="el" href="d6/d78/xmp3__multicast_8c.html" title="Simple extension module that multicasts messages to other XMP3 instances.">xmp3_multicast.c</a> provides a method to deliver stanzas server-to-server via a UDP multicast group.</p>
<p>See the README file in the source distribution for more information about building/running XMP3.</p>
<h2>Basic Architecture</h2>
<p>XMP3 tries to maintain a very simple architecture. The main server functions handle creating the server socket, and routing incoming stanzas to appropriate callback functions. This is all done in a single-threaded manner, managed by a small event loop.</p>
<p>The two key components of XMP3 are the event loop and the main server functions, which are explained below.</p>
<h3>Event Loop</h3>
<p>XMP3 currently uses a simple event loop (implemented in <a class="el" href="d0/deb/event_8c.html" title="Simple event loop.">event.c</a>), based on registering callbacks for when sockets are available to read. All sockets used in XMP3 are managed through this event loop (main server socket, all client connections). Plugins can hook into the event loop in order to receive notifications of incoming data on any sockets they are using.</p>
<h3>Main Server</h3>
<p>The main server (implemented in <a class="el" href="d0/df0/xmpp__server_8c.html" title="Main XMPP server data/functions.">xmpp_server.c</a>), mainly provides the core stanza router. Each incoming and outgoing stanza is matched on its "to" attribute to determine which callback function is called. Stanzas to a locally connected client are passed to the <a class="el" href="d6/d13/xmpp__core_8c.html#a3b41e83061abd7ed5b258c7aa7dda0d6" title="An xmpp_server stanza route for stanzas directed to a local client.">xmpp_core_route_client()</a> callback function. Stanzas addressed to the server itself (such as IQs) are deliverd to the <a class="el" href="d6/d13/xmpp__core_8c.html#a777c384ae6685d30bfa255c4b33022aa" title="An xmpp_server stanza route for stanzas directed to the server itself.">xmpp_core_route_server()</a> callback function. IQ stanzas in particular are delivered to the <a class="el" href="d0/df0/xmpp__server_8c.html#a8ddb3bbfd497811c13e9426ce6f02003" title="Deliver an IQ stanza to a registered callback function.">xmpp_server_route_iq()</a> function which then calls the appropriate callback based on the namespace of the IQ (most of which are implemented in <a class="el" href="dc/da6/xmpp__im_8c.html" title="Implements the parsing for RFC6121 IM and Presence.">xmpp_im.c</a>).</p>
<p>Plugins can extend the functionality of the core server by adding stanza routes with <a class="el" href="d0/df0/xmpp__server_8c.html#add7e09cc71b8417eab325d96bc2be357" title="Add a callback to the list of routes for stanza delivery.">xmpp_server_add_stanza_route()</a> (i.e. the MUC component registers a route for conference.localhost). They can also implement IQs with <a class="el" href="d0/df0/xmpp__server_8c.html#afc0b58cc507d836285e78e2f200b0985" title="Add a callback to handle IQ stanza to a particular namespace+tag name.">xmpp_server_add_iq_route()</a>. </p>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 23 2012 14:18:13 for XMP3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
