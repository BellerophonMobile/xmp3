<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>XMP3: xmp3_module Struct Reference</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">XMP3
   
   </div>
   <div id="projectbrief">XMPP Proxy - Small Extensible XMPP Server</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">xmp3_module Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Structure representing an XMP3 extension module.  
 <a href="../../db/dad/structxmp3__module.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a85d4a5f7da6af42cfdac9bfc3c1b16b2"><td class="memItemLeft" align="right" valign="top">void *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dad/structxmp3__module.html#a85d4a5f7da6af42cfdac9bfc3c1b16b2">mod_new</a> )(void)</td></tr>
<tr class="memdesc:a85d4a5f7da6af42cfdac9bfc3c1b16b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for creating and initializing a new instance of a module.  <a href="#a85d4a5f7da6af42cfdac9bfc3c1b16b2"></a><br/></td></tr>
<tr class="memitem:aced750c330c90c1588128f05210ef7bd"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dad/structxmp3__module.html#aced750c330c90c1588128f05210ef7bd">mod_del</a> )(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>)</td></tr>
<tr class="memdesc:aced750c330c90c1588128f05210ef7bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for cleaning up and deallocating an instance of a module.  <a href="#aced750c330c90c1588128f05210ef7bd"></a><br/></td></tr>
<tr class="memitem:a1b3f69e53107358d410f7853f9e97404"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dad/structxmp3__module.html#a1b3f69e53107358d410f7853f9e97404">mod_conf</a> )(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>, const char *key, const char *value)</td></tr>
<tr class="memdesc:a1b3f69e53107358d410f7853f9e97404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for setting module options.  <a href="#a1b3f69e53107358d410f7853f9e97404"></a><br/></td></tr>
<tr class="memitem:a6bff7f9cbb64872a79b9c992194043d7"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dad/structxmp3__module.html#a6bff7f9cbb64872a79b9c992194043d7">mod_start</a> )(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>, struct <a class="el" href="../../d0/df0/xmpp__server_8c.html#d8/d34/structxmpp__server">xmpp_server</a> *server)</td></tr>
<tr class="memdesc:a6bff7f9cbb64872a79b9c992194043d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start an instantiated module.  <a href="#a6bff7f9cbb64872a79b9c992194043d7"></a><br/></td></tr>
<tr class="memitem:a07fe4c7c52270514591f1c5c212c8852"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dad/structxmp3__module.html#a07fe4c7c52270514591f1c5c212c8852">mod_stop</a> )(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>)</td></tr>
<tr class="memdesc:a07fe4c7c52270514591f1c5c212c8852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to stop an instantiated and running module.  <a href="#a07fe4c7c52270514591f1c5c212c8852"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Structure representing an XMP3 extension module. </p>
<p>Each module should define a global symbol named "XMP3_MODULE" containing this structure, with the methods filled in. XMP3 will call these functions at the appropriate time.</p>
<p>To load a module, define a section in a config file with the name of the shared object containing the extension. See the example config file. </p>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00048">48</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>
</div><hr/><h2>Field Documentation</h2>
<a class="anchor" id="a1b3f69e53107358d410f7853f9e97404"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* <a class="el" href="../../db/dad/structxmp3__module.html#a1b3f69e53107358d410f7853f9e97404">xmp3_module::mod_conf</a>)(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>, const char *key, const char *value)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for setting module options. </p>
<p>This will be called once for each (key = value) pair in the configuration file for a module instance.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the module instance. </td></tr>
    <tr><td class="paramname">key</td><td>The name of the configuration option to set. </td></tr>
    <tr><td class="paramname">value</td><td>The value of the configuration option to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if successful, False on error (invalid key, etc.). </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00083">83</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>

</div>
</div>
<a class="anchor" id="aced750c330c90c1588128f05210ef7bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="../../db/dad/structxmp3__module.html#aced750c330c90c1588128f05210ef7bd">xmp3_module::mod_del</a>)(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for cleaning up and deallocating an instance of a module. </p>
<p>Thsi will be called once for each instantiated module when the server shuts down. It should free any resources allocated during the operation of the module.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the module instance. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00070">70</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>

</div>
</div>
<a class="anchor" id="a85d4a5f7da6af42cfdac9bfc3c1b16b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void*(* <a class="el" href="../../db/dad/structxmp3__module.html#a85d4a5f7da6af42cfdac9bfc3c1b16b2">xmp3_module::mod_new</a>)(void)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for creating and initializing a new instance of a module. </p>
<p>This will be called once for each new instantiation of a module. It should allocate memory and initialize any default variables for your module, and return a pointer to that memory. The returned pointer will be passed to the subsequent functions to manipulate.</p>
<dl class="section return"><dt>Returns:</dt><dd>A new instance of this module. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00059">59</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6bff7f9cbb64872a79b9c992194043d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* <a class="el" href="../../db/dad/structxmp3__module.html#a6bff7f9cbb64872a79b9c992194043d7">xmp3_module::mod_start</a>)(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>, struct <a class="el" href="../../d0/df0/xmpp__server_8c.html#d8/d34/structxmpp__server">xmpp_server</a> *server)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function to start an instantiated module. </p>
<p>This will be called immediately after the server is started, after all the configuration options have been parsed. This is where a module can register stanza routes, callback functions, or run its own event loop in a thread if necessary. If a module fails to start, the server will stop and report the error.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the module instance. </td></tr>
    <tr><td class="paramname">server</td><td>A pointer to the running XMPP server instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if sucessful, False on error. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00098">98</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>

</div>
</div>
<a class="anchor" id="a07fe4c7c52270514591f1c5c212c8852"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* <a class="el" href="../../db/dad/structxmp3__module.html#a07fe4c7c52270514591f1c5c212c8852">xmp3_module::mod_stop</a>)(void *<a class="el" href="../../d3/dd8/xmp3__module_8c.html#dd/deb/structmodule">module</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function to stop an instantiated and running module. </p>
<p>This will be called just after the server is stopped. This should remove any registered stanza routes and event callbacks, and stop any threads that are running. Essesntially, this module should stop everything short of freeing memory. On error, the server will report the error, but continue in its normal shutdown sequence. In the future, the server may have the capability to start/stop modules at runtime.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>A pointer to the module instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>True if sucessful, False on error. </dd></dl>

<p>Definition at line <a class="el" href="../../d5/d89/xmp3__module_8h_source.html#l00113">113</a> of file <a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/<a class="el" href="../../d5/d89/xmp3__module_8h_source.html">xmp3_module.h</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 23 2012 14:18:13 for XMP3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
